Optimises search for all desired combinations by marking hints about visited states.
